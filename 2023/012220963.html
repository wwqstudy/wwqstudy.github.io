<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Web安全基础, wwqstudy">
    <meta name="description" content="信息收集1信息收集——渗透测试的灵魂
为什么要信息收集？
有句话说“知己知彼，百战不殆”。最了解你的人往往都是你的对手。
当你所掌握到的信息比别人多且更详细的时候那么你就占据了先机，这一条不仅仅用于商业、战争、渗透测试中也适用。
信息收集的">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Web安全基础 | wwqstudy</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism.css" type="text/css"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">wwqstudy</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">wwqstudy</div>
        <div class="logo-desc">
            
            绘一纸潇湘，花盏玲珑如妆，雨落弦响，陌上芳华，醉影照天长
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/23.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Web安全基础</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                          <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                          </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-01-22
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    14.4k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    57 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="信息收集1"><a href="#信息收集1" class="headerlink" title="信息收集1"></a>信息收集1</h2><p>信息收集——渗透测试的灵魂</p>
<p>为什么要信息收集？</p>
<p>有句话说“知己知彼，百战不殆”。最了解你的人往往都是你的对手。</p>
<p>当你所掌握到的信息比别人多且更详细的时候那么你就占据了先机，这一条不仅仅用于商业、战争、渗透测试中也适用。</p>
<p>信息收集的方向、究竟收集什么？</p>
<p>以 <a target="_blank" rel="noopener" href="http://www.secdriver.com/">http://www.secdriver.com/</a> 这个网站为例，你知道这个网站是谁的(注册人/机构)吗？当查到了网站所属的机构是某个公司后，那你能找到这个公司旗下拥有的其它网站吗？你访问网站后发现他是某个机构的官网，那你能发现这个网站使用了什么编程语言，php还是jsp；使用了什么WEB容器，apache还是iis ; 网站的后台地址是什么；网站使用的服务器是windows还是linux，服务器的ip是什么, 这个ip上都开放了哪些端口?；这个网站是不是某一款流行的cms产品？。</p>
<p>带着这些问题，让我们开始今天的学习 ~~~</p>
<h3 id="1-域名信息查询"><a href="#1-域名信息查询" class="headerlink" title="1.域名信息查询"></a><strong>1.域名信息查询</strong></h3><h4 id="什么是域名？"><a href="#什么是域名？" class="headerlink" title="什么是域名？"></a><strong>什么是域名？</strong></h4><p><strong>域名</strong>（<strong>Domain Name</strong>），又称<strong>网域</strong>，是由一串用点分隔的名字组成的Internet上某一台计算机或计算机组的名称，用于在数据传输时对计算机的定位标识（有时也指地理位置）。</p>
<p>由于IP地址具有不方便记忆并且不能显示地址组织的名称和性质等缺点，人们设计出了域名，并通过网域名称系统（DNS，Domain Name System）来将域名和IP地址相互映射，使人更方便地访问互联网，而不用去记住能够被机器直接读取的IP地址数串。</p>
<p>计算机是不认识域名的，域名只是为了方便人们记忆而进行创建的</p>
<p>域名解析示例：secdriver.com -&gt; DNS 服务器 114.114.114.114 -&gt; 47.94.98.63</p>
<p>域名ip查询：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ping secdriver.com  # ping DNS解析
nslookup secdriver.com  # nslookup DNS解析<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><img src="/2023/012220963/1.PNG" alt=" "></p>
<h4 id="域名级别"><a href="#域名级别" class="headerlink" title="域名级别"></a><strong>域名级别</strong></h4><p>域名可分为不同级别，包括顶级域名、二级域名等</p>
<h5 id="顶级域名"><a href="#顶级域名" class="headerlink" title="顶级域名"></a><strong>顶级域名</strong></h5><p><strong>国家顶级域名</strong>（national top-level domainnames，简称nTLDs），200多个国家都按照ISO3166国家代码分配了顶级域名，例如中国是 .cn，美国是 .us，日本是 .jp 等</p>
<p><strong>国际顶级域名</strong>（international top-level domain names，简称iTDs），例如表示工商企业的 .com，表示网络提供商的 .net，表示顶级标杆、个人的 .top，表示非盈利组织的.org等</p>
<h5 id="二级域名"><a href="#二级域名" class="headerlink" title="二级域名"></a><strong>二级域名</strong></h5><p>二级域名是指顶级域名之下的域名，在国际顶级域名下，它是指域名注册人的网上名称，例如”.ibm”，”.yahoo”，”.microsoft”等；在国家顶级域名下，它是表示注册企业类别的符号</p>
<h5 id="三级域名"><a href="#三级域名" class="headerlink" title="三级域名"></a><strong>三级域名</strong></h5><p>三级域名用字母（a～z）、数字（0～9）和连接符（－）组成， 各级域名之间用实点（.）连接，三级域名的长度不能超过20个字符，域名长度有限，最多可注册63个字符，域名总长度不能超过253个字符</p>
<h4 id="什么是子域名？"><a href="#什么是子域名？" class="headerlink" title="什么是子域名？"></a><strong>什么是子域名？</strong></h4><p><strong>子域名</strong>（<strong>Subdomain</strong>）是在域名系统等级中，属于更高一层域的域。比如，mail.example.com和calendar.example.com是example.com的两个子域，而example.com则是顶级域 .com 的子域。</p>
<p>子域名示例：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">主域名：secdriver.com
子域名：
www.secdriver.com
edu.secdriver.com
mail.secdriver.com
ctf.secdriver.com
...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="IP反查域名"><a href="#IP反查域名" class="headerlink" title="IP反查域名"></a><strong>IP反查域名</strong></h4><p>通过IP可以反查出绑定在该网站的域名，来发现更多资产</p>
<p>ip138: <a target="_blank" rel="noopener" href="https://site.ip138.com/">https://site.ip138.com/</a></p>
<p>webscan: <a target="_blank" rel="noopener" href="https://www.webscan.cc/">https://www.webscan.cc/</a></p>
<p>VirusTotal: <a target="_blank" rel="noopener" href="https://www.virustotal.com/">https://www.virustotal.com</a></p>
<p>微步在线：<a target="_blank" rel="noopener" href="https://x.threatbook.cn/">https://x.threatbook.cn/</a></p>
<h4 id="Whois查询"><a href="#Whois查询" class="headerlink" title="Whois查询"></a><strong>Whois查询</strong></h4><p>whois指的是域名注册时留下的信息，比如留下管理员的名字、电话号码、邮箱。知道目标的域名之后，我们要做的第一件事就是获取域名的whois信息，因为域名注册人可能是网站管理员，可以尝试社工、套路，查询是不是注册了其他域名扩大攻击范围。</p>
<h5 id="查询网站"><a href="#查询网站" class="headerlink" title="查询网站"></a><strong>查询网站</strong></h5><p>爱站工具网: <a target="_blank" rel="noopener" href="https://whois.aizhan.com/">https://whois.aizhan.com</a></p>
<p>站长之家: <a target="_blank" rel="noopener" href="http://whois.chinaz.com/">http://whois.chinaz.com</a></p>
<p>VirusTotal: <a target="_blank" rel="noopener" href="https://www.virustotal.com/">https://www.virustotal.com</a></p>
<p>通过这些网站可以查询域名的相关信息，如域名服务商、域名拥有者，以及他们的邮箱、电话、地址等。</p>
<h5 id="kali工具"><a href="#kali工具" class="headerlink" title="kali工具"></a><strong>kali工具</strong></h5><p>whois 域名</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">whois www.secdriver.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="ICP备案信息查询"><a href="#ICP备案信息查询" class="headerlink" title="ICP备案信息查询"></a><strong>ICP备案信息查询</strong></h4><p>网站备案是根据国家法律法规规定，需要网站的所有者向国家有关部门申请的备案，这是国家信息产业部对网站的一种管理，为了防止在网上从事非法的网站经营活动的发生。主要针对国内网站，如果网站搭建在其他国家，则不需要进行备案。</p>
<p>常用的网站有以下几个：</p>
<p>工业和信息化部政务服务平台：<a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">https://beian.miit.gov.cn/</a></p>
<p>全国互联网安全管理平台：<a target="_blank" rel="noopener" href="http://www.beian.gov.cn/portal/recordQuery">http://www.beian.gov.cn/portal/recordQuery</a></p>
<p>天眼查：<a target="_blank" rel="noopener" href="http://www.tianyancha.com/">http://www.tianyancha.com</a></p>
<h4 id="子域名收集"><a href="#子域名收集" class="headerlink" title="子域名收集"></a><strong>子域名收集</strong></h4><p>假设我们的目标网络规模比较大，直接从主域入手显然是很不理智的，因为对于这种规模的目标，一般其主域都是重点防护区域，所以不如先进入目标的某个子域，然后再想办法迂回接近真正的目标。</p>
<h5 id="网站查询子域名"><a href="#网站查询子域名" class="headerlink" title="网站查询子域名"></a><strong>网站查询子域名</strong></h5><p>VirusTotal <a target="_blank" rel="noopener" href="https://www.virustotal.com/gui/home/search">https://www.virustotal.com/gui/home/search</a></p>
<p>fofa <a target="_blank" rel="noopener" href="https://fofa.info/">https://fofa.info/</a></p>
<h5 id="工具扫描"><a href="#工具扫描" class="headerlink" title="工具扫描"></a><strong>工具扫描</strong></h5><p>Layer子域名挖掘机</p>
<p><img src="/2023/012220963/4.PNG" alt="4"></p>
<h3 id="2-端口信息"><a href="#2-端口信息" class="headerlink" title="2.端口信息"></a><strong>2.端口信息</strong></h3><p>计算机“端口”是英文port的义译，可以认为是计算机与外界通讯交流的出口，计算机有0~65535，共计65536个端口。</p>
<p>端口作为服务器和客户端交互的接口，起着非常重要的作用。一些常见的端口标识出服务器开启了什么服务，比如3389端口开启，可以认为服务器系统为windows并且开启了远程服务的功能。所以，端口扫描在渗透测试中是非常重要的。</p>
<h4 id="插件探测"><a href="#插件探测" class="headerlink" title="插件探测"></a><strong>插件探测</strong></h4><h5 id="Fofa-Pro-view"><a href="#Fofa-Pro-view" class="headerlink" title="Fofa Pro view"></a><strong>Fofa Pro view</strong></h5><p><img src="/2023/012220963/5.png" alt="5"></p>
<h5 id="shodan"><a href="#shodan" class="headerlink" title="shodan"></a><strong>shodan</strong></h5><p><img src="/2023/012220963/6.png" alt="6"></p>
<h4 id="工具扫描-1"><a href="#工具扫描-1" class="headerlink" title="工具扫描"></a><strong>工具扫描</strong></h4><h5 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a><strong>nmap</strong></h5><p>nmap 是一款开源免费的针对大型网络的端口扫描工具，nmap可以检测目标主机是否在线、主机端口开放情况、检测主机运行的服务类型及版本信息、检测操作系统与设备类型等信息</p>
<p>nmap常用参数</p>
<p><img src="/2023/012220963/2.PNG" alt="2"></p>
<h6 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a><strong>基本使用</strong></h6><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">nmap 192.168.23.1  # Nmap 默认发送⼀个arp的ping数据包，来探测⽬标主机在1-10000范围内所开放的端⼝<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h6 id="主机发现"><a href="#主机发现" class="headerlink" title="主机发现"></a><strong>主机发现</strong></h6><p>主机发现的原理与Ping命令类似，发送探测包到目标主机，如果收到回复，那么说明目标主机是开启的</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">nmap -sP 192.168.1.0&#x2F;24  # 进行ping扫描，打印出对扫描做出响应的主机,不做进一步测试端口扫描或者操作系统探测<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h6 id="操作系统识别"><a href="#操作系统识别" class="headerlink" title="操作系统识别"></a><strong>操作系统识别</strong></h6><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">nmap -O 192.168.23.1     # 操作系统版本探测
nmap -O --osscan-limit 192.168.23.1  # 探测操作系统版本详细信息
nmap -O --osscan-guess 192.168.23.1  # 猜测操作系统版本
nmap -A 192.168.23.1     # 操作系统探测和服务版本探测等<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a><strong>端口扫描</strong></h6><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">nmap -sT 192.168.23.1 -p 21,22,23,53,80,135,443,445 # (默认) TCP全连接扫描,常见端口
nmap -sS 192.168.23.1 -p 1-3000 --open -vv  # (常用) 快速扫描 1-3000 范围端口,只显示开放端口信息
nmap -PN 192.168.23.1 -p 1-3000  # 不使用ping命令扫描
nmap -PR 192.168.23.1 -p 1-3000  # arp扫描，内网中局域网防火墙不拦截，速度很快
nmap -P0 192.168.23.1 -p 1-3000  # 空闲扫描，不会留下记录
nmap -sV 192.168.81.148 -p 3389,5985,6588,999,21,80 -A  # 探测端口信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a><strong>格式化输出</strong></h6><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 使用 nmap 结果美化 model, 美化 nmap 输出的 xml 文档，使用-oX xxx.xml 或者 -oA xxx 可
将结果导出为 xml 格式
# 端口信息探测 + 系统探测 + 基础扫描
nmap -sV -A 192.168.23.1 -p 80,88,135,139,443,445,903,1080,1688,3306,5357 -oA mysite
# 格式化 xml 文档
xsltproc -o mysite.html mode.xsl mysite.xml
# 使用浏览器打开 html 文档
firefox mysite.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="常见端口"><a href="#常见端口" class="headerlink" title="常见端口"></a><strong>常见端口</strong></h6><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">80,89,8000,9090,1433,1521,3306,5432,445,135,443,873,5984,6379,7001,7002,9200,9300,11211,27017,27018,50000,50070,50030,21,22,23,2601,3389<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h5 id="masscan"><a href="#masscan" class="headerlink" title="masscan"></a><strong>masscan</strong></h5><p>masscan 是 Kali 下集成的高效扫描器 , 速度非常快</p>
<p>masscan 常用参数</p>
<p><img src="/2023/012220963/3.PNG" alt="3"></p>
<h6 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a><strong>基本用法</strong></h6><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">masscan 192.168.23.1 -p 1-3000<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h6 id="枚举C段"><a href="#枚举C段" class="headerlink" title="枚举C段"></a><strong>枚举C段</strong></h6><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-sL 参数可以枚举网段
masscan -sL 10.0.0.0&#x2F;24 &gt; c段.txt
masscan -sL 10.0.0.0&#x2F;16 &gt; b段.txt
masscan -sL 10.0.0.0&#x2F;8 &gt; a段.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="端口御剑扫描"><a href="#端口御剑扫描" class="headerlink" title="端口御剑扫描"></a><strong>端口御剑扫描</strong></h6><h3 id="3-C段和旁站"><a href="#3-C段和旁站" class="headerlink" title="3.C段和旁站"></a><strong>3.C段和旁站</strong></h3><h4 id="旁站"><a href="#旁站" class="headerlink" title="旁站"></a><strong>旁站</strong></h4><p>旁注：同服务器不同站点的渗透方案</p>
<p>旁站指的是网站所在服务器上部署的其他网站，同IP网站，一个IP上布置了多个网站从同台服务器上的其他网站入手，获取到服务器权限，自然就获取到了目标网站的权限</p>
<h4 id="C段"><a href="#C段" class="headerlink" title="C段"></a><strong>C段</strong></h4><p><strong>C段</strong>：同网段不同服务器的渗透方案</p>
<p>C 段嗅探指的是拿下同一C段下的服务器，也就是说是D段1-255中的一台服务器，再通过内网横向移动获取你想要的服务器权限。</p>
<p>例如192.168.1.66 -&gt; 192.168.1.4 能够相互通讯可以控制该网段中的192.168.1.66，再通过内网横向移动来控制 192.168.1.4 </p>
<p>注意：一般情况下云服务器C段的IP都是相互独立的，这些服务器分属不同用户，没有渗透的必要</p>
<h5 id="在线查询网站"><a href="#在线查询网站" class="headerlink" title="在线查询网站"></a><strong>在线查询网站</strong></h5><p><a target="_blank" rel="noopener" href="https://www.webscan.cc/">https://www.webscan.cc/</a></p>
<h5 id="工具扫描C段"><a href="#工具扫描C段" class="headerlink" title="工具扫描C段"></a><strong>工具扫描C段</strong></h5><p>一般可以扫描一些常见端口，来发现C段中在线的主机，比如</p>
<h5 id="nmap-1"><a href="#nmap-1" class="headerlink" title="nmap"></a><strong>nmap</strong></h5><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">nmap -A -vv 192.168.23.1&#x2F;24    # 很慢，慎用可以加-T参数
nmap -PR -vv 192.168.23.1&#x2F;24 -p 1-1000,8000-9000 --open  # arp 扫描, 速度快
nmap -PN -vv 192.168.23.1&#x2F;24 -p 1-1000 --open # 不使用ping扫描，能发现禁ping主机<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h5 id="masscan-1"><a href="#masscan-1" class="headerlink" title="masscan"></a><strong>masscan</strong></h5><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">masscan 192.168.23.1&#x2F;24 --ping   # icmp探测C段在线主机
masscan 192.168.23.1&#x2F;24 -p
21,22,80,137,138,139,443,445,1433,1434,1521,3306,6379,7001,8000,8080,9001 --open-only<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h5 id="御剑端口扫描"><a href="#御剑端口扫描" class="headerlink" title="御剑端口扫描"></a><strong>御剑端口扫描</strong></h5><h2 id="信息收集2"><a href="#信息收集2" class="headerlink" title="信息收集2"></a>信息收集2</h2><p>补天SRC：<a target="_blank" rel="noopener" href="https://www.butian.net/">https://www.butian.net/</a></p>
<p>公益SRC：<a target="_blank" rel="noopener" href="https://www.butian.net/Reward/plan/2">https://www.butian.net/Reward/plan/2</a></p>
<h3 id="目录信息收集"><a href="#目录信息收集" class="headerlink" title="目录信息收集"></a>目录信息收集</h3><ul>
<li><p>寻找到网站后台管理</p>
</li>
<li><p>寻找未授权界面</p>
</li>
<li><p>寻找网站更多隐藏信息</p>
</li>
<li><p>发现这个网站存在多少个目录，多少个页面，探索出网站的整体结构</p>
</li>
<li><p>发现敏感文件，后台文件，数据库文件，和信息泄漏文件等等</p>
</li>
</ul>
<h4 id="常见的后台管理页面："><a href="#常见的后台管理页面：" class="headerlink" title="常见的后台管理页面："></a>常见的后台管理页面：</h4><p><img src="/2023/012220963/7.PNG" alt="7"></p>
<h4 id="robots-txt"><a href="#robots-txt" class="headerlink" title="robots.txt"></a>robots.txt</h4><p>Robots协议(Robots Exclusion Protocol)“网络爬虫排除标准”，网站通过Robots协议告诉搜索引擎哪些页面可以抓取，哪些页面不能抓取，同时也记录网站所具有基本的目录</p>
<p><img src="/2023/012220963/8.PNG" alt="8"></p>
<h3 id="目录扫描工具"><a href="#目录扫描工具" class="headerlink" title="目录扫描工具"></a>目录扫描工具</h3><h5 id="dirsearch"><a href="#dirsearch" class="headerlink" title="dirsearch"></a>dirsearch</h5><p>dirsearch是一个基于python3的命令行工具，旨在暴力扫描页面结构，包括网页中的目录和文件</p>
<p>依赖安装： pip install -r requirements.txt</p>
<p>简单使用：python dirsearch.py -u 目标地址</p>
<h6 id="常见参数"><a href="#常见参数" class="headerlink" title="常见参数"></a>常见参数</h6><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">## 基本使用
-h  # 使用帮助
-u  # 指定目标url，最好加上协议类型 如http https
-L  # 指定url列表文件
-e  # 参数指定网站类型 php, jsp, asp, aspx, do, action, cgi, pl, html, htm, js, json, tar.gz, bak (-e *代表所有)

## 自定义选项
-w  # 指定字典扫描
-t  # 指定线程数（默认20）
-r  # 递归扫描 扫描到目录文件会进一步向下挖掘
-random-agents #使用随机UA
-H  # 使用指定headers (e.g. --header &quot;Referer: example.com&quot; --header &quot;User-Agent: IE&quot;)
-m  # 指定http请求方式，默认get
-d  # 发送的 data 数据
--cookie    # 添加 cookie
--proxy  # 添加代理 e.g. --proxy 127.0.0.1:1080

## 过滤扫描结果
-i &#x2F;         # http 状态码白名单 (e.g. 200,300-399)
-x &#x2F; --exclude-status    # 排除指定 http 状态码 （e.g.:301,403,500-599)
--exclude-texts  # 文本排除响应 (e.g.: &quot;Not found&quot;, &quot;Error&quot;)
--exclude-regexps   # 按regexp排除响应，用逗号分隔(e.g.: &quot;Not foun[a-z]&#123;1&#125;&quot;, &quot;^Error$&quot;)

## 报告输出
-o 指定报告文件输出地址
--format 报告文件格式 (默认: simple, plain, json, xml,md,csv, html, sqlite)
--log 输出扫描日志文件 (一般不用)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="网站指纹识别"><a href="#网站指纹识别" class="headerlink" title="网站指纹识别"></a>网站指纹识别</h4><p>在web渗透过程中，Web指纹识别是信息收集环节中一个比较重要的步骤，通过一些开源的工具、平台或者手工检测CMS系统是公开的CMS程序还是二次开发至关重要，能准确的获取CMS类型、Web服务组件类型及版本信息可以帮助安全工程师快速有效的去验证已知漏洞。对目标渗透测试过程中，目标的cms是十分重要的信息，有了目标的cms，就可以利用相关bug进行测试，进行代码审计等。</p>
<h4 id="识别方式"><a href="#识别方式" class="headerlink" title="识别方式"></a>识别方式</h4><p>1.网站特有文件</p>
<p>如/templets/default/style/dedecms.css — dedecms</p>
<p>2.网站独有文件的md5</p>
<p>如favicon.ico，但是该文件可以被修改导致不准确。</p>
<p>文件md5计算 certutil -hashfile filename MD5</p>
<p>3.网站文件命名规则</p>
<p>4.返回头的关键字 如 header=”rememberMe=deleteMe”</p>
<p>5.网页关键字</p>
<p>如 /data/sessions/index.html——dedecms</p>
<p> /data/admin/ver.txt</p>
<p>6.Url特征</p>
<p>10.网站路径特征</p>
<p>11.网站静态资源</p>
<p>12.爬虫网站目录信息</p>
<p><strong>指纹识别对象</strong></p>
<p>1、CMS信息：比如大汉CMS、织梦、帝国CMS、phpcms、ecshop等；</p>
<p>2、前端技术：比如HTML5、jquery、bootstrap、pure、ace等；</p>
<p>3、Web服务器：比如Apache、lighttpd, Nginx, IIS等；</p>
<p>4、应用服务器：比如Tomcat、Jboss、weblogic、websphere等；</p>
<p>5、开发语言：比如PHP、Java、Ruby、Python、C#等；</p>
<p>6、操作系统信息：比如linux、win2008、win7、kali、centos等；</p>
<p>7、CDN信息：是否使用CDN，如cloudflare、360cdn、365cyd、yunjiasu等；</p>
<p>8、WAF信息：是否使用waf，如Topsec、safedog、Yundun等；</p>
<p>9、IP及域名信息：IP和域名注册信息、服务商信息等；</p>
<p>10、端口信息：有些软件或平台还会探测服务器开放的常见端口。</p>
<p>示例网站：<a target="_blank" rel="noopener" href="http://ask.ltsec.com/">http://ask.ltsec.com/</a></p>
<h4 id="识别工具"><a href="#识别工具" class="headerlink" title="识别工具"></a>识别工具</h4><p>Kali工具：<strong>whatweb</strong></p>
<p>whatweb 域名 # 单个域名识别</p>
<h4 id="在线指纹识别："><a href="#在线指纹识别：" class="headerlink" title="在线指纹识别："></a>在线指纹识别：</h4><p><a target="_blank" rel="noopener" href="http://whatweb.bugscaner.com/">http://whatweb.bugscaner.com/</a></p>
<p><a target="_blank" rel="noopener" href="http://pentest.gdpcisa.org/whatcms">http://pentest.gdpcisa.org/whatcms</a></p>
<h5 id="指纹探测插件：Wapplyzer"><a href="#指纹探测插件：Wapplyzer" class="headerlink" title="指纹探测插件：Wapplyzer"></a>指纹探测插件：Wapplyzer</h5><h4 id="CDN识别"><a href="#CDN识别" class="headerlink" title="CDN识别"></a>CDN识别</h4><h5 id="认识CDN"><a href="#认识CDN" class="headerlink" title="认识CDN"></a>认识CDN</h5><p>CDN是指内容分发网络。CDN是构建在现有网络基础之上的智能虚拟网络，依靠部署在各地的边缘服务器。</p>
<p><img src="/2023/012220963/9.PNG" alt="9"></p>
<p>通过中心平台的负载均衡内容分发，调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。</p>
<p>CDN的基本原理是广泛采用各种缓存服务器，将这些缓存服务器分布到用户访问相对集中的地区或网络内。</p>
<p>在用户访问网站时，利用全局负载技术将用户的访问<strong>指向距离最近的工作正常的缓存服务器上</strong>，由缓存服务器直接响应用户请求。</p>
<p><img src="/2023/012220963/10.PNG" alt="10"></p>
<h5 id="识别CDN"><a href="#识别CDN" class="headerlink" title="识别CDN"></a>识别CDN</h5><p>nslookup</p>
<p>多地ping网站：<a target="_blank" rel="noopener" href="https://ping.chinaz.com/">https://ping.chinaz.com/</a> <a target="_blank" rel="noopener" href="https://tools.ipip.net/ping.php">https://tools.ipip.net/ping.php</a></p>
<p>在线识别：<a target="_blank" rel="noopener" href="https://www.cdnplanet.com/tools/cdnfinder">https://www.cdnplanet.com/tools/cdnfinder</a></p>
<p>示例网站：<a target="_blank" rel="noopener" href="https://royalapps.com/">https://royalapps.com/</a> 、<a target="_blank" rel="noopener" href="https://taobao.com/">https://taobao.com</a></p>
<h3 id="搜索引擎语法"><a href="#搜索引擎语法" class="headerlink" title="搜索引擎语法"></a>搜索引擎语法</h3><h4 id="fofa语法"><a href="#fofa语法" class="headerlink" title="fofa语法"></a>fofa语法</h4><p>网址：<a target="_blank" rel="noopener" href="https://fofa.info/">https://fofa.info/</a></p>
<p><strong>高级搜索</strong></p>
<p>&amp;&amp; = and </p>
<p>可以使用括号 和 &amp;&amp; (与) 、|| (或)、 != (非)、等符号，如</p>
<pre class="line-numbers language-none"><code class="language-none">title&#x3D;&quot;powered by&quot; &amp;&amp; title!&#x3D;&quot;discuz&quot;
body&#x3D;&quot;content&#x3D;WordPress&quot; || (header&#x3D;&quot;X-Pingback&quot; &amp;&amp; header&#x3D;&quot;&#x2F;xmlrpc.php&quot; &amp;&amp; 
body&#x3D;&quot;&#x2F;wp-includes&#x2F;&quot;) &amp;&amp; host&#x3D;&quot;gov.cn&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><strong>常用语法</strong></p>
<pre class="line-numbers language-none"><code class="language-none">domain&#x3D;&quot;qq.com&quot; #查询子域名
host&#x3D;&quot;.gov.cn&quot;   #从url中搜索&quot;.gov.cn&quot;
header&#x3D;&quot;thinkphp&quot; #从http头中搜索thinkphp
port&#x3D;&quot;6379&quot;       #查找对应“6379”端口的资产
ip&#x3D;&quot;1.1.1.1&quot;     #从ip中搜索包含“1.1.1.1”的网站
ip&#x3D;&quot;220.181.111.1&#x2F;24&quot;   #查询IP为“220.181.111.1”的C网段资产
status_code&#x3D;&quot;402&quot; #查询服务器状态为“402”的资产
app&#x3D;&quot;通达OA网络智能办公系统&quot;   # 搜索通达OA系统
country&#x3D;&quot;CN&quot;     # 搜索指定国家(编码)的资产
region&#x3D;&quot;Henan&quot;   # 搜索指定行政区的资产<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="360Quake"><a href="#360Quake" class="headerlink" title="360Quake"></a>360Quake</h4><p><a target="_blank" rel="noopener" href="https://quake.360.cn/">https://quake.360.cn/</a></p>
<h4 id="奇安信鹰图"><a href="#奇安信鹰图" class="headerlink" title="奇安信鹰图"></a>奇安信鹰图</h4><p><a target="_blank" rel="noopener" href="https://hunter.qianxin.com/">https://hunter.qianxin.com/</a></p>
<h4 id="google语法"><a href="#google语法" class="headerlink" title="google语法"></a>google语法</h4><p>基本语法</p>
<p><strong>AND：缺一不可</strong></p>
<p>谷歌的默认搜索是and逻辑，意思就是，我们在输入关键字后进行搜索时，如输入：“program google”后，会搜出包含“program”和“google”的文件内容，如图</p>
<p><img src="/2023/012220963/11.PNG" alt="11"></p>
<p>基础布尔逻辑</p>
<p>对于一个搜索引擎来说，进行搜索的时候是要搜索到匹配到所有关键词的页面，还是包含关键词中的任意关键词就可以，取决于一个搜索引擎的一些特别算法，称之为搜索引擎的布尔逻辑默认值。</p>
<p><strong>OR：两者皆可</strong></p>
<p>而google就是用and作为默认逻辑（搜索到所有的关键词），当然这个前提是我们没有输入一些特殊的命令。如果你不确定你要搜索的内容，或者你想搜索两个中的任意一个，那么就要使用关键词“OR”。注意：OR是大写的，小写是不起作用的，而且，每一个关键词与“OR”之间是有一个空格的，我们来看一下搜索结果。</p>
<p><img src="/2023/012220963/12.PNG" alt="12"></p>
<p>当然，可以预想的是，google的结果要比program多得多，所以结果第一页全是有关google的内容。此外，还可以借助计算机体系语言中的“|”来代替“OR”，效果是一样的。</p>
<p><strong>“”</strong> <strong>：一刻都不能分割</strong></p>
<p>当然，如果你希望搜索“programgoogle”的内容，而不希望这两个单词之间有任何其他的内容，那么就要使用双引号把搜索的内容组成一个词组”programgoogle”来达到目的。如图所示。</p>
<p><img src="/2023/012220963/13.PNG" alt="13"></p>
<p>如上图所示，结果中的programgoogle都是在一起的，没有分割。当然这样的结果比较少，只有2740个，但是看图1，结果却有7亿多个。而且，大部分搜索引擎都有智能断句的功能，如果没有特殊的命令，搜索引擎会一定量的根据大众的语言使用习惯来判断你要搜索什么，而这样的做法，不仅仅没有使搜索引擎显得不听话，反而对大众来讲搜索引擎变得十分智能和高效！</p>
<p><strong>-</strong> <strong>：不想看到你</strong></p>
<p>但是如果我们只想看到“program”的内容，而不希望看到“google”的内容，就可以把“-”（减号或者破折号）应用到搜索当中去，语法为“program -google”，注意，“-”之前是有一个空格的，而其后却是和下一个关键词是紧紧相连的！搜索的结果如下图4所示。可以看得到结果中都会包含program，而不包含google</p>
<p><img src="/2023/012220963/14.PNG" alt="14"></p>
<p><strong>+</strong> <strong>：就想看到你</strong></p>
<p>说到这里，还要提一下google的约束扩展问题了。一般来说，当输入关键词后，google会把相关网页和信息的结果呈现在我们面前。然而，有一些单词在搜索引擎中是会被智能忽略的，导致我们得不到想要的结果。比如十分常用的“www”和“the”，基本上任何一个网页上都会找到的东西，就会被google自动忽略（不要觉得这样不好，还是那个道理，在实际引用当中这样做反而显得更加高效和智能）。如果我们不想忽略这些词进行查询，就得在这些关键词的前面加上符号“+”。如下图5所示：</p>
<p>看上去两者好像没有什么大的区别，其实仔细比较一下搜索结果就可以看得出，加上加号的搜索结果有一万多个，而不加加号的结果却有着55亿多！而因为google和www的关联度比较高，所以在前面的结果表现的差别不大。</p>
<p><img src="/2023/012220963/15.PNG" alt="15"></p>
<p><strong>“?”和“*” ：占位通配符</strong></p>
<p>除了上述字符之外，一些搜索引擎支持一种叫做“stemming”（填充）的技术。Stemming是指在查询的关键词中添加一些通配符，通常是“<em>”，有时候也可能是“？”，这些通配符的作用是要求搜索引擎进行查询是可以返回多个不同的结果。其中通配符代表占位，可以匹配其他任意字母和单词，而其他的字或词组与用户输入的相同。如我们想要搜索“Lionel Messi”的内容，却忘记了第一个单词的一些拼写，就可以输入“”l</em>Messi””进行查询，注意：此处整个字符串是要用一个英文半角双引号括住的！结果如下图所示。　</p>
<p>可以看到，google自动匹配出Lionel Messi的内容并且进行了搜索。这样的方式有利于我们只能记住单词或短语的一部分的内容时使用。</p>
<p><img src="/2023/012220963/16.PNG" alt="16"></p>
<p><strong>特殊语法</strong></p>
<pre class="line-numbers language-none"><code class="language-none">site：可以限制你搜索范围的域名；
inurl：用于搜索网页上包含的URL，这个语法对寻找网页上的搜索，帮助之类的很有用；
intext: 只搜索网页&lt;body&gt;部分中包含的文字(也就是忽略了标题、URL等的文字)；
intitle: 查包含关键词的页面，一般用于社工别人的webshell密码；
filetype：搜索文件的后缀或者扩展名；
intitle：限制你搜索的网页标题；
inanchor: 搜素网站锚节点内容
cache   # 缓存搜索 cache 关键字 cache:secquan.org 当一个链接无法访问时（或信息被屏蔽时）；当信息已经被修改，想看以前的信息时<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>常用技巧</strong></p>
<pre class="line-numbers language-none"><code class="language-none">查找后台地址：
site:域名
inurl:login|admin|manage|member|admin_login|login_admin|system|login|user|main|c
ms
查找文本内容：
site:域名 intext:管理|后台|登陆|用户名|密码|验证码|系
统|admin|login|sys|managetem|password|username
查找可注入点：
site:域名 inurl:aspx|jsp|php|asp
查找上传漏洞：
site:域名 inurl:file|load|editor|Files
找eweb编辑器：
site:域名 inurl:ewebeditor|editor|uploadfile|eweb|edit
存在的数据库：
site:域名 filetype:mdb|asp|#
查看脚本类型：
site:域名 filetype:asp&#x2F;aspx&#x2F;php&#x2F;jsp
迂回策略入侵：
inurl:cms&#x2F;data&#x2F;templates&#x2F;images&#x2F;index&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="bing语法"><a href="#bing语法" class="headerlink" title="bing语法"></a>bing语法</h4><p>bing 搜索语法与 google类似</p>
<pre class="line-numbers language-none"><code class="language-none">inbody: 查找正文内容     inbody:密码|登陆
intitle: 查找标签内容
inanchor: 查找锚节点
filetype: 查找文件类型
site:返回属于指定网站的网页。若要搜索两个或更多域，请使用逻辑运算符OR对域进行分组
ip: 查找特点ip的网站<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="CDN识别-amp-amp-绕过"><a href="#CDN识别-amp-amp-绕过" class="headerlink" title="CDN识别&amp;&amp;绕过"></a>CDN识别&amp;&amp;绕过</h2><p>CDN 的全称是 Content Delivery Network，即内容分发网络。CDN 是构建在现有网络基础之上的智能虚拟网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上，但在安全测试过程中，若目标存在 CDN 服务，将会影响到后续的安全测试过程。</p>
<h3 id="CDN识别-1"><a href="#CDN识别-1" class="headerlink" title="CDN识别"></a>CDN识别</h3><h4 id="GET请求"><a href="#GET请求" class="headerlink" title="GET请求"></a>GET请求</h4><p>GET 请求页面/文件地址，查看 HTTP 响应头中是否存在 “cache xxx” 的值，若存在，则表示有走 CDN。</p>
<p><img src="/2023/012220963/17.PNG" alt="17"></p>
<h4 id="ping域名"><a href="#ping域名" class="headerlink" title="ping域名"></a>ping域名</h4><p>ping 域名，查看 ping 的实际地址，若实际地址为 CDN 节点地址，则表示有走 CDN。</p>
<p><img src="/2023/012220963/18.PNG" alt="18"></p>
<h4 id="nslookup解析"><a href="#nslookup解析" class="headerlink" title="nslookup解析"></a>nslookup解析</h4><p>nslookup 域名，若解析结果有多个，很有可能存在CDN，相反，若解析结果只有一个，可能不存在CDN(不能肯定)。</p>
<p><img src="/2023/012220963/19.PNG" alt="19"></p>
<h4 id="多地ping"><a href="#多地ping" class="headerlink" title="多地ping"></a>多地ping</h4><p>利用多地区的ping服务器操作，然后对比每个地区ping出的IP结果，查看这些IP是否一致， 如果都是一样的，极有可能不存在CDN。如果IP大多不太一样或者规律性很强，可以尝试查询这些IP的归属地，判断是否存在CDN。</p>
<p><img src="/2023/012220963/20.PNG" alt="20"></p>
<h3 id="CDN厂商"><a href="#CDN厂商" class="headerlink" title="CDN厂商"></a>CDN厂商</h3><h4 id="CDN厂商识别"><a href="#CDN厂商识别" class="headerlink" title="CDN厂商识别"></a>CDN厂商识别</h4><p><a target="_blank" rel="noopener" href="https://www.cdnplanet.com/tools/cdnfinder/#">https://www.cdnplanet.com/tools/cdnfinder/#</a></p>
<p><a target="_blank" rel="noopener" href="http://tools.bugscaner.com/whichcdn/">http://tools.bugscaner.com/whichcdn/</a></p>
<p>国外厂商：CloudFlare、StackPath、Fastly、CDNetworks、CacheFly、CloudFront</p>
<p>国内厂商：阿里云CDN、Ucloud、Nodecache、腾讯云CDN、网宿CDN、白山CDN、金山CDN</p>
<p>CloudFlare <a target="_blank" rel="noopener" href="https://gyzzwk.ml/">https://gyzzwk.ml/</a></p>
<p>StackPath <a target="_blank" rel="noopener" href="https://151.139.113.56/">https://151.139.113.56/</a></p>
<p> Alibaba <a target="_blank" rel="noopener" href="https://www.taobao.com/">https://www.taobao.com/</a></p>
<p>Wangsu <a target="_blank" rel="noopener" href="https://www.chinaz.com/">https://www.chinaz.com</a></p>
<p>Tencent Cloud <a target="_blank" rel="noopener" href="https://qq.com/">https://qq.com</a></p>
<h3 id="CDN绕过"><a href="#CDN绕过" class="headerlink" title="CDN绕过"></a>CDN绕过</h3><h4 id="子域名查询"><a href="#子域名查询" class="headerlink" title="子域名查询"></a>子域名查询</h4><p>CDN是付费的，一些网站主站因为业务需要可能做了CDN加速，但是其他域名可能没有做CDN加速。</p>
<p>案例：xueersi.com</p>
<h4 id="第三方网站查询"><a href="#第三方网站查询" class="headerlink" title="第三方网站查询"></a>第三方网站查询</h4><p>网站IP&amp;地址查询：<a target="_blank" rel="noopener" href="https://get-site-ip.com/">https://get-site-ip.com/</a></p>
<p>历史DNS信息查询：<a target="_blank" rel="noopener" href="https://securitytrails.com/app/account">https://securitytrails.com/app/account</a></p>
<h4 id="国外地址请求"><a href="#国外地址请求" class="headerlink" title="国外地址请求"></a>国外地址请求</h4><p>ping工具：<a target="_blank" rel="noopener" href="https://ping.sx/ping">https://ping.sx/ping</a></p>
<p><a target="_blank" rel="noopener" href="https://tools.ipip.net/newping.php">https://tools.ipip.net/newping.php</a></p>
<p>案例：sp910.com</p>
<h4 id="邮件服务器获取ip"><a href="#邮件服务器获取ip" class="headerlink" title="邮件服务器获取ip"></a>邮件服务器获取ip</h4><p>目标服务器主动连接我们时，不会受到CDN影响目标网站存在邮件验证等功能时，我们通过查看邮件源码，可能获取邮件服务器IP地址 及 发件人 IP地址。</p>
<h4 id="文件指纹搜索"><a href="#文件指纹搜索" class="headerlink" title="文件指纹搜索"></a>文件指纹搜索</h4><p>查询网站：shodan.io</p>
<p>icohash.py # 因为 shodan 高级功能要收费，通过脚本可以获取 ico hash。</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">import mmh3
import requests
import base64
response &#x3D; requests.get(&#39;https:&#x2F;&#x2F;www.baidu.com&#x2F;favicon.ico&#39;)
favicon &#x3D; base64.b64encode(response.content).decode()
hash &#x3D; mmh3.hash(favicon)
print(&#39;http.favicon.hash:&#39;+str(hash))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>案例：baidu.com</p>
<h5 id="mmh3安装方式"><a href="#mmh3安装方式" class="headerlink" title="mmh3安装方式"></a>mmh3安装方式</h5><p><strong>第一种</strong>（推荐）：</p>
<p>mmh3 依赖下载地址：<a target="_blank" rel="noopener" href="https://www.wheelodex.org/projects/mmh3/wheels/mmh3-3.0.0-cp39-cp39-win_amd64.whl/">https://www.wheelodex.org/projects/mmh3/wheels/mmh3-3.0.0-cp39-cp39-win_amd64.whl/</a></p>
<p>安装指定依赖包: pip install mmh3-3.0.0-cp39-cp39-win_amd64.whl </p>
<p><strong>第二种</strong>（不推荐，vs2019非常大）：</p>
<p>安装vs2019 下载组件 C++ ATL v141 </p>
<p><img src="/2023/012220963/21.PNG" alt="21"></p>
<p>然后 pip install mmh3 即可成功安装</p>
<h4 id="工具扫描全网"><a href="#工具扫描全网" class="headerlink" title="工具扫描全网"></a>工具扫描全网</h4><p>扫描全网开放特定端口的IP，然后获取他们的特定页面的HTM源代码，用这些源代码和目标网站的特定页面的HTM源代码做对比，如果匹配上来了，就很可能是目标网站的真实P，工具匹配会匹配出来很多，最后还是要人工筛选。</p>
<p><strong>zmap扫描全网</strong></p>
<h2 id="暴力破解1"><a href="#暴力破解1" class="headerlink" title="暴力破解1"></a>暴力破解1</h2><p>“暴力破解”是一攻击具手段，在web攻击中，一般会使用这种手段对应用系统的认证信息进行获取。 其过程就是使用大量的认证信息在认证接口进行尝试登录，直到得到正确的结果。 为了提高效率，暴力破解一般会使用带有字典的工具来进行自动化操作。</p>
<p>理论上来说，大多数系统都是可以被暴力破解的，只要攻击者有足够强大的计算能力和时间，所以断定一个系统是否存在暴力破解漏洞，其条件也不是绝对的。 我们说一个web应用系统存在暴力破解漏洞，一般是指该web应用系统没有采用或者采用了比较弱的认证安全策略，导致其被暴力破解的“可能性”变的比较高。</p>
<h3 id="弱口令爆破"><a href="#弱口令爆破" class="headerlink" title="弱口令爆破"></a>弱口令爆破</h3><p>是指使用字典文件进行爆破，字典多为经验积累其中是一些常见的字符组合。</p>
<p><strong>待补充</strong></p>
<h4 id="登录认证流程"><a href="#登录认证流程" class="headerlink" title="登录认证流程"></a>登录认证流程</h4><p><strong>待补充</strong></p>
<h4 id="简单登录认证模型"><a href="#简单登录认证模型" class="headerlink" title="简单登录认证模型"></a>简单登录认证模型</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&lt;!DOCTYPE html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;
    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;edge&quot;&gt;
    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;
    &lt;title&gt;Document&lt;&#x2F;title&gt;
&lt;&#x2F;head&gt;
&lt;body&gt;
    &lt;form action&#x3D;&quot;login.php&quot; method&#x3D;&quot;POST&quot;&gt;
    账号: &lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;username&quot;&gt;
    &lt;br&#x2F;&gt;
    密码: &lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;password&quot;&gt;
    &lt;br&#x2F;&gt;
    &lt;button type&#x3D;&quot;submit&quot;&gt;登陆&lt;&#x2F;button&gt;
    &lt;&#x2F;form&gt;
    
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
&lt;?php
$username &#x3D; $_POST[&#39;username&#39;];
$password &#x3D; $_POST[&#39;password&#39;];
echo $username.&quot;&#x2F;&quot;.$password.&quot;\r\n&quot;;
if($username &#x3D;&#x3D; &#39;admin&#39; &amp;&amp; $password &#x3D;&#x3D; &#39;123456&#39;)&#123;
    echo &quot;欢迎您登陆成功！&quot;;
&#125;else &#123;
    echo &quot;账号或密码错误！&quot;;
&#125;
?&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="靶场练习"><a href="#靶场练习" class="headerlink" title="靶场练习"></a>靶场练习</h3><h4 id="DVWA"><a href="#DVWA" class="headerlink" title="DVWA"></a>DVWA</h4><p>在线靶场 <a target="_blank" rel="noopener" href="http://vulfocus.cn/">http://vulfocus.cn/</a> 搜索启动 dvwa</p>
<p>DVWA靶场登陆账号：admin 密码：password</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">DVWA靶场已有的账号密码：
|  1 | admin  &#x2F;  123456
|  2 | gordonb &#x2F; abc123
|  3 | pablo &#x2F; letmein<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="pikachu"><a href="#pikachu" class="headerlink" title="pikachu"></a>pikachu</h4><p>在线靶场 <a target="_blank" rel="noopener" href="http://vulfocus.cn/">http://vulfocus.cn/</a> 搜索启动 pikachu</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">pikachu靶场已有的账号密码：
|  1 | admin  &#x2F;  123456
|  2 | pikachu &#x2F; 000000
|  3 | test   &#x2F;  abc123<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="burp抓token爆破"><a href="#burp抓token爆破" class="headerlink" title="burp抓token爆破"></a>burp抓token爆破</h3><h4 id="token是什么？"><a href="#token是什么？" class="headerlink" title="token是什么？"></a>token是什么？</h4><p> <strong>1</strong>、<strong>Token的引入</strong>：Token是在客户端频繁向服务端请求数据，服务端频繁的去数据库查询用户名和密码并进行对比，判断用户名和密码正确与否，并作出相应提示，在这样的背景下，Token便应运而生。</p>
<p> <strong>2</strong>、<strong>Token的定义</strong>：Token是服务端生成的一串字符串，以作客户端进行请求的一个令牌，当第一次登录后，服务器生成一个Token便将此Token返回给客户端，以后客户端只需带上这个Token前来请求数据即可，无需再次带上用户名和密码。</p>
<p> <strong>3</strong>、<strong>使用Token的目的</strong>：Token的目的是为了减轻服务器的压力，减少频繁的查询数据库，使服务器更加健壮。</p>
<h4 id="Token认证过程"><a href="#Token认证过程" class="headerlink" title="Token认证过程"></a>Token认证过程</h4><p><strong>基于Token的身份验证的过程如下:</strong></p>
<p>1.用户通过用户名和密码发送请求。</p>
<p>2.服务器端程序验证。</p>
<p>3.服务器端程序返回一个带签名的token 给客户端。</p>
<p>4.客户端储存token,并且每次访问API都携带Token到服务器端的。</p>
<p>5.服务端验证token，校验成功则返回请求数据，校验失败则返回错误码。</p>
<p><img src="/2023/012220963/22.PNG" alt="22"></p>
<p><strong>简单示例：</strong></p>
<ol>
<li>burp抓包发送到intruder,爆破模式选择Pitchfork</li>
</ol>
<p><img src="/2023/012220963/25.PNG" alt="25"></p>
<ol start="2">
<li>payloads中第二个数据选择Recursive grep</li>
</ol>
<p><img src="/2023/012220963/26.PNG" alt="26"></p>
<ol start="3">
<li>在Resourse Pool模块下的线程要调为1，因为一个token只能一时间产生一个</li>
</ol>
<p><img src="/2023/012220963/27.PNG" alt="27"></p>
<ol start="4">
<li>Options模块的Grep-Extract模式里添加token，有的token重复刷新会界面302获取不了，记得更换新的token</li>
</ol>
<p><img src="/2023/012220963/28.PNG" alt="28"></p>
<ol start="5">
<li>回到payloads模块加一新的token</li>
</ol>
<p><img src="/2023/012220963/28.PNG" alt="28"></p>
<ol start="6">
<li>爆破，找出正确密码</li>
</ol>
<h3 id="Basic认证爆破"><a href="#Basic认证爆破" class="headerlink" title="Basic认证爆破"></a>Basic认证爆破</h3><p>basic认证（基本认证）是从http/1.0就定义的认证方式。即使是如今仍有一部分的网站会使用这种认证方式。</p>
<p><img src="/2023/012220963/23.PNG" alt="23"></p>
<h4 id="Basic认证过程"><a href="#Basic认证过程" class="headerlink" title="Basic认证过程"></a>Basic认证过程</h4><p><strong>步骤1</strong> ：当请求的资源须要BASIC认证时，服务器会随状态码401Authorization Requireed，返回带WWW-Authenticate首部字段的响应。该字段内包含认证的方式（BASIC）及 Request-URI安全域字符串（realm）安全</p>
<p><strong>步骤2</strong> ：接收到状态码401的客户端为了经过BASIC认证，须要将用户ID及密码发送给服务器。发送的字符串内容是由用户ID和密码构成，二者中间以(:)链接后，在通过Base64编码处理。服务器假设用户ID为guest，密码是guest，链接起来就会造成guest：guest这样的字符串。而后通过base64编</p>
<p>码，最后结果是 Z3VLc3Q6Z3Vlc3Q=。把这串字符串写入首部字段Authrization以后发送请求。网站当用户代理为浏览器时，用户仅输入用户ID和密码便可，以后，浏览器会自动完成到base64编码的转换工作</p>
<p><strong>步骤3</strong>： 接收到包含首部字段Authorization请求的服务器，会对认证信息的正确性进行验证。若是验证经过，则返回一条包含Request-URI的资源响应编码basic认证虽然采用了Base64编码方式，但这不是加密处理。不须要任何附加信息便可对其解码。换言之，因为明文解码后就是用户id和密码，在http等非加密通讯的路线上进行BASIC认证的工程中，若是被窃听，被盗的可能性极高。</p>
<p>地址：<a target="_blank" rel="noopener" href="http://vulfocus.io/">http://vulfocus.io/</a> 搜索关键字 tomcat-pass-getshell</p>
<p><strong>操作过程待补充</strong></p>
<h3 id="python编写爆破脚本"><a href="#python编写爆破脚本" class="headerlink" title="python编写爆破脚本"></a>python编写爆破脚本</h3><h4 id="python异常处理"><a href="#python异常处理" class="headerlink" title="python异常处理"></a>python异常处理</h4><p>参考链接：<a target="_blank" rel="noopener" href="https://www.runoob.com/python/python-exceptions.html">https://www.runoob.com/python/python-exceptions.html</a></p>
<h5 id="什么是异常？"><a href="#什么是异常？" class="headerlink" title="什么是异常？"></a>什么是异常？</h5><p>异常即是一个事件，该事件会在程序执行过程中发生，影响了程序的正常执行。一般情况下，在Python无法正常处理程序时就会发生一个异常。</p>
<p>异常是Python对象，表示一个错误。当Python脚本发生异常时我们需要捕获处理它，否则程序会终止执行。</p>
<h5 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h5><p>捕捉异常可以使用try/except语句。</p>
<p>try/except语句用来检测try语句块中的错误，从而让except语句捕获异常信息并处理。</p>
<p>如果你不想在异常发生时结束你的程序，只需在try里捕获它。</p>
<p>语法：</p>
<p>以下为简单的<em>try….except…else</em>的语法：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">try:
&lt;语句&gt;        #运行别的代码
except &lt;名字&gt;：
&lt;语句&gt;        #如果在try部份引发了&#39;name&#39;异常
except &lt;名字&gt;，&lt;数据&gt;:
&lt;语句&gt;        #如果引发了&#39;name&#39;异常，获得附加的数据
else:
&lt;语句&gt;        #如果没有异常发生<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="简单实例"><a href="#简单实例" class="headerlink" title="简单实例"></a>简单实例</h5><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">try:
    fh &#x3D; open(&quot;testfile&quot;, &quot;w&quot;)
    fh.write(&quot;这是一个测试文件，用于测试异常!!&quot;)
except IOError:
    print(&quot;Error: 没有找到文件或读取文件失败&quot;)
    exit(&quot;发生致命错误, 程序结束!&quot;)
else:
    print(&quot;内容写入文件成功&quot;)
    fh.close()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="mysite爆破脚本"><a href="#mysite爆破脚本" class="headerlink" title="mysite爆破脚本"></a>mysite爆破脚本</h4><p>burp.py</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">import requests
import time
import datetime
user_arr &#x3D; open(&quot;users.txt&quot;, &quot;r&quot;, encoding&#x3D;&quot;utf8&quot;).readlines()
# print(user_arr)
pwd_arr &#x3D; open(&quot;passwd.txt&quot;, &quot;r&quot;, encoding&#x3D;&quot;utf8&quot;).readlines()
# print(pwd_arr)
f &#x3D; open(&quot;success.txt&quot;, &quot;a&quot;, encoding&#x3D;&quot;utf8&quot;)
for j in user_arr:
    for i in pwd_arr:
        data &#x3D; &#123;
            &quot;username&quot;: j.strip(),
            &quot;password&quot;: i.strip(),
       &#125;
        print(&quot;尝试使用 &quot;+j.strip() + &quot; &#x2F; &quot; + i.strip() + &quot; 登陆&quot;)
        
        try:
            res &#x3D; requests.post(&quot;http:&#x2F;&#x2F;www.mysite.com&#x2F;&quot;, data&#x3D;data, 
allow_redirects&#x3D;False, timeout&#x3D;10, verify&#x3D;False)
            
        except (WindowsError) as e:
            # print(e.args)
            # print(type(e))
            print(repr(e))
            print(&quot;网络连接异常, 程序将自动退出&quot;)
            exit()
            except Exception as e:
            print(&quot;未知错误，请查看error.log&quot;)
            open(&quot;error.log&quot;, &quot;a&quot;, 
encoding&#x3D;&quot;utf8&quot;).write(str(datetime.datetime.now()) + &quot; --- &quot; + repr(e) + &quot;\n&quot;)
            exit()
            
        else:
            if(res.status_code &#x3D;&#x3D; 302):
                f.write(j.strip() + &quot;:&quot; + i)
                print(&quot;success&quot; + &quot;账号为 &quot; + j.strip() + &quot; 密码为 &quot; + i.strip())
                time.sleep(2)
                break
print(&quot;运行结束~！&quot;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="pikachu-token验证爆破脚本"><a href="#pikachu-token验证爆破脚本" class="headerlink" title="pikachu token验证爆破脚本"></a>pikachu token验证爆破脚本</h4><p>burp_token.py</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">import requests
import time
import datetime
import re
session &#x3D; requests.Session()
user_arr &#x3D; open(&quot;users.txt&quot;, &quot;r&quot;, encoding&#x3D;&quot;utf8&quot;).readlines()
pwd_arr &#x3D; open(&quot;passwd.txt&quot;, &quot;r&quot;, encoding&#x3D;&quot;utf8&quot;).readlines()
f &#x3D; open(&quot;success.txt&quot;, &quot;a&quot;, encoding&#x3D;&quot;utf8&quot;)
for j in user_arr:
    for i in pwd_arr:
        try:
            res &#x3D; session.get(&quot;http:&#x2F;&#x2F;www.pikachu.com&#x2F;vul&#x2F;burteforce&#x2F;bf_token.php&quot;, timeout&#x3D;10, verify&#x3D;False)
        except (WindowsError) as e:
            print(repr(e))
            print(&quot;网络连接异常, 程序将自动退出&quot;)
            exit()
        except Exception as e:
            print(&quot;未知错误，请查看error.log&quot;)
            open(&quot;error.log&quot;, &quot;a&quot;, encoding&#x3D;&quot;utf8&quot;).write(str(datetime.datetime.now()) + &quot; --- &quot; + repr(e) + &quot;\n&quot;)
            exit()
        else:
            token &#x3D; re.findall(&#39;&lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;token&quot; value&#x3D;&quot;(.*?)&quot;&#39;,res.text)[0]

        data &#x3D; &#123;
            &quot;username&quot;: j.strip(),
            &quot;password&quot;: i.strip(),
            &quot;token&quot;: token,
            &quot;submit&quot;: &quot;Login&quot;
      &#125;
        print(&quot;尝试使用 &quot;+j.strip() + &quot; &#x2F; &quot; + i.strip() + &quot; --- token: &quot;+ token +&quot; 登陆&quot;)
        try:
            res &#x3D; session.post(&quot;http:&#x2F;&#x2F;www.pikachu.com&#x2F;vul&#x2F;burteforce&#x2F;bf_token.php&quot;, 
data&#x3D;data,timeout&#x3D;10, verify&#x3D;False, allow_redirects&#x3D;False)
        except (WindowsError) as e:
            print(repr(e))
            print(&quot;网络连接异常, 程序将自动退出&quot;)
            exit()
        except Exception as e:
            print(&quot;未知错误，请查看error.log&quot;)
            open(&quot;error.log&quot;, &quot;a&quot;, encoding&#x3D;&quot;utf8&quot;).write(str(datetime.datetime.now()) + &quot; --- &quot; + repr(e) + &quot;\n&quot;)
            exit()
        else:
            if(&quot;username or password is not exists&quot; not in res.text):
                f.write(j.strip() + &quot;:&quot; + i)
                print(&quot;success&quot; + &quot;账号为 &quot; + j.strip() + &quot; 密码为 &quot; + i.strip())
                time.sleep(2)
                break
print(&quot;运行结束~！&quot;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="暴力破解2"><a href="#暴力破解2" class="headerlink" title="暴力破解2"></a>暴力破解2</h2><h3 id="CS架构破解"><a href="#CS架构破解" class="headerlink" title="CS架构破解"></a>CS架构破解</h3><p>B/S架构即 Brouser/Server ，是一种浏览器和服务器架构模式；CS架构是指服务器-客户机。服务器-客户机，即Client/Server(C/S)结构。</p>
<h4 id="hydra爆破工具"><a href="#hydra爆破工具" class="headerlink" title="hydra爆破工具"></a>hydra爆破工具</h4><p>hydra 可以爆破 ftp / ssh / telnet / mysql / rdp 等各种服务。</p>
<p>常用参数</p>
<p><img src="/2023/012220963/24.PNG" alt="24"></p>
<h5 id="学习平台实操"><a href="#学习平台实操" class="headerlink" title="学习平台实操"></a>学习平台实操</h5><p>登陆vpn访问学习平台：<a target="_blank" rel="noopener" href="https://edu.work.ltsec.com/index">https://edu.work.ltsec.com/index</a> 访问暴力穷举破解进行练习</p>
<h5 id="mysql开启远程登录"><a href="#mysql开启远程登录" class="headerlink" title="mysql开启远程登录"></a>mysql开启远程登录</h5><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">登陆mysql
use &#96;mysql&#96;;
# 注意将密码替换掉
GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;你的密码&#39; WITH GRANT
OPTION;
FLUSH PRIVILEGES;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="windows开启rdp远程桌面服务"><a href="#windows开启rdp远程桌面服务" class="headerlink" title="windows开启rdp远程桌面服务"></a>windows开启rdp远程桌面服务</h5><pre class="line-numbers language-none"><code class="language-none">查看远程端口或者使用注册表
REG query HKLM\SYSTEM\CurrentControlSet\Control\Terminal&quot; 
&quot;Server\WinStations\RDP-Tcp &#x2F;v PortNumber
再
set &#x2F;a a&#x3D;0xd3d
当远程桌面服务被关闭时，可以用注册表命令开启
REG ADD HKLM\SYSTEM\CurrentControlSet\Control\Terminal&quot; &quot;Server &#x2F;v 
fDenyTSConnections &#x2F;t REG_DWORD &#x2F;d 0 &#x2F;f<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="超级弱口令爆破工具"><a href="#超级弱口令爆破工具" class="headerlink" title="超级弱口令爆破工具"></a>超级弱口令爆破工具</h4><p>填写目标 ip 、账户名或账号密码字典 进行爆破破解。</p>
<p><strong>操作待补充</strong></p>
<h5 id="自定义端口号"><a href="#自定义端口号" class="headerlink" title="自定义端口号"></a>自定义端口号</h5><p>点击设置可更改服务默认端口。</p>
<p><strong>操作待补充</strong></p>
<h4 id="社工字典生成"><a href="#社工字典生成" class="headerlink" title="社工字典生成"></a>社工字典生成</h4><p>当你收集到目标的具体信息后，你就可以通过工具来智能化生成关于目标的字典。当对目标进行渗透测试的时候，常见密码爆破不成功，大批量的字典耗时太长时，就需要一份结合具体目标的带社工性质的字典，可以很大提升爆破效率。</p>
<h5 id="亦思"><a href="#亦思" class="headerlink" title="亦思"></a>亦思</h5><p><strong>操作待补充</strong></p>
<h5 id="cupp"><a href="#cupp" class="headerlink" title="cupp"></a>cupp</h5><p>Cupp是一款用Python语言写成的可交互性的字典生成脚本</p>
<p>Kali 安装 Cupp: apt-get install cupp</p>
<p><strong>查看命令：****cupp</strong></p>
<p><strong>参数说明</strong></p>
<pre class="line-numbers language-none"><code class="language-none">参数名 参数含义
-v 查看cupp版本号
-h 查看参数列表
-l 从github仓库里面下载字典
-i 使用交互式的提问创建用户字典
-w 在已存在的字典上进行扩展<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>执行cupp -i生成字典</strong></p>
<p>输入被攻击目标的姓、名、外号、生日、父母的名字、外号、生日、子女的名字、外号、生日等等一系列的信息。如果你有这些信息，直接输入，如果没有直接回车进行下一步。然后是宠物、公司等名称，需要不需要加关键字当前缀后缀等等，如果不知道或者不想加，直接回车跳过最后在命令执行的目录里生成字典文件。</p>
<p>注意：输入生日信息的时候是按照日、月、年的顺序，如11021990就是1990年2月11</p>
<h3 id="验证码绕过"><a href="#验证码绕过" class="headerlink" title="验证码绕过"></a>验证码绕过</h3><p>验证码原理：客户端发起请求-&gt;服务端响应并创建一个新的SessionID同时生成随机验证码，将验证码和SessionID一并返回给客户端-&gt;客户端提交验证码连同SessionID给服务端-&gt;服务端验证验证码同时销毁当前会话，返回给客户端结果。</p>
<p>【客户端可能存在的安全问题】</p>
<p>1、有的网站验证码由本地js生成仅仅在本地用js验证。可以在本地禁用js，用burp把验证字段删除。</p>
<p>2、有的网站把验证码输出到客户端html中，送到客户端Cookie或response headers。</p>
<p>3、有些网站默认不显示验证码，而是在输入错误一定数量之后才需要验证验证码，开发人员可能在Cookie中写入一个标记loginErr，用来记录错误数量，则可以不更新Cookie中的loginErr值反复提交，验证码就不会出现。</p>
<p>【服务端可能存在的安全问题】</p>
<p>1、验证码不过期，没有及时销毁会话导致同一验证码反复可用。攻击者可以在Cookie中带固定的sessionID和固定的验证码字符串。</p>
<p>2、没有对验证码进行非空判断，导致可以直接删除验证码参数。</p>
<p>3、产生的验证码问题有限</p>
<h4 id="验证码固定"><a href="#验证码固定" class="headerlink" title="验证码固定"></a>验证码固定</h4><p>导致验证码不刷新（固定）的原因是：登录密码错误之后，session中的值没有更新，验证码不变。验证码不刷新通常有以下两种情况：无条件不刷新、有条件不刷新。</p>
<h5 id="无条件不刷新"><a href="#无条件不刷新" class="headerlink" title="无条件不刷新"></a>无条件不刷新</h5><p>无条件不刷新是指在某一时间段内，无论登录失败多少次，只要不刷新页面，就可以无限次的使用同一个验证码来对一个或多个用户帐号进行暴力猜解。换句话说，攻击者可以在同一个会话下，在获得第一个验证码后，后面不再主动触发验证码生成页面，并且一直使用第一个验证码就可循环进行后面的表单操作，从而绕过了验证码的屏障作用，对登录进行暴力猜解。</p>
<h5 id="有条件不刷新"><a href="#有条件不刷新" class="headerlink" title="有条件不刷新"></a>有条件不刷新</h5><p>有条件不刷新多见于如下情况：登录失败之后，系统会打开一个新页面或者弹出一个新的警告窗口，提示用户登录失败，点击确定后返回登录界面且验证码刷新。这种情况下，只要我们不关闭新窗口或弹窗，配合使用Burpsuite的intruder模块就可以进行暴力破解了。某系统的验证码鉴权流程：用户输入账户信息+验证码(刷新页面或手动刷新验证码会从服务器获取验证码，但该验证码缓存于session中)，服务端接收到账户信息+验证后会先校验验证码是否正确，若不正确则，返回反之与数据库做对比，符合则返回，客户端接收服务端的请求，若成功则跳转，返回根据不同的错误码提示相应信息，并重新获取服务端生成的新验证码，重新缓存。</p>
<p>【问题描述】看完流程可以很容易想到一个问题：验证码此时并不会重置，一切重置验证码的操作都在浏览器，所以在Session不失效的时效内，可以无限重用验证码，这时就可以使用BurpSuite进行暴力破解了，验证码形同虚设。</p>
<p><strong>操作待补充</strong></p>
<p>仅在客户端生成验证码</p>
<p>有的网站验证码由前端js生成仅仅在前端用js验证，这种验证码形同虚设直接使用burp抓包提交即可。</p>
<p><strong>操作待补充</strong></p>
<h4 id="验证码隐藏在源码之中"><a href="#验证码隐藏在源码之中" class="headerlink" title="验证码隐藏在源码之中"></a>验证码隐藏在源码之中</h4><p>验证这种情况很简单，我们只需要记住验证码，然后右键打开网站源代码，Ctrl+F搜索，输入刚才的验证码，如果可以成功匹配到，那恭喜你，接下来就可以写工具，提取源码中的验证码并将其放入每次请求的报文中，来进行帐号破解，使用python编写脚本即可。</p>
<h4 id="验证码隐藏在Cookie中"><a href="#验证码隐藏在Cookie中" class="headerlink" title="验证码隐藏在Cookie中"></a>验证码隐藏在Cookie中</h4><p>一般来说，我们会把验证码的值用Session存储起来，通过对比用户提交的验证码和Session中的验证码，就可以知道输入是否正确。由于Session会占用服务器资源，有的开发人员会把验证码的值加密后存储在Cookie中。</p>
<p>这种情况，我们可以在提交登录的时候抓包，然后分析一下包中的Cookie字段，看看其中有没有相匹配的验证码，或者是经过了一些简单加密后的验证码。</p>
<h4 id="验证码可穷举"><a href="#验证码可穷举" class="headerlink" title="验证码可穷举"></a>验证码可穷举</h4><p>有的验证码不是使用算法随机生成的，而是一些固定的图片，多刷新几次验证码我们可能会发现系统中的存在就那么一些验证码，这种情况这种情况下只要将验证码全部下载下来，生成一个md5库，然后将前端生成的验证码与本地文件进行对比即可。</p>
<p>思路：建立图片md5库 与 对应验证码值库后，用 resquest.Session() 建立一个可保持状态的request对象，下载验证码图片后与md5库对比得出验证码值，进行登陆爆破即可。</p>
<h2 id="暴力破解与加密"><a href="#暴力破解与加密" class="headerlink" title="暴力破解与加密"></a>暴力破解与加密</h2><h3 id="Debug代码调试"><a href="#Debug代码调试" class="headerlink" title="Debug代码调试"></a>Debug代码调试</h3><p>Debug的意义在于发现程序错误的存在以隔离、消除等方式对错误，进行定位确定错误产生的原因，提出纠正错误的解决办法，对程序错误予以改正</p>
<h4 id="vscode-debug-python"><a href="#vscode-debug-python" class="headerlink" title="vscode debug python"></a>vscode debug python</h4><h5 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h5><h6 id="1-安装插件python"><a href="#1-安装插件python" class="headerlink" title="1.安装插件python"></a>1.安装插件python</h6><p><img src="/2023/012220963/30.PNG" alt="30"></p>
<h6 id="2-配置文件"><a href="#2-配置文件" class="headerlink" title="2.配置文件"></a>2.配置文件</h6><p>vscdoe会在每个文件夹下创建一个 .vscode 的配置文件目录 ， 在其中创建 <strong>launch.json 、tasks.json</strong></p>
<p><img src="/2023/012220963/31.PNG" alt="31"></p>
<p><strong>lanuch.json</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&#123;
    &#x2F;&#x2F; 使用 IntelliSense 了解相关属性。
    &#x2F;&#x2F; 悬停以查看现有属性的描述。
    &#x2F;&#x2F; 欲了解更多信息，请访问: https:&#x2F;&#x2F;go.microsoft.com&#x2F;fwlink&#x2F;?linkid&#x3D;830387
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
       &#123;
            &quot;name&quot;: &quot;Python&quot;,
            &quot;type&quot;: &quot;python&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;stopOnEntry&quot;: false,
            &quot;python&quot;: &quot;D:\\python\\python\\python.exe&quot;, &#x2F;&#x2F; 替换为自己的python.exe路径
            &quot;program&quot;: &quot;$&#123;file&#125;&quot;,
            &quot;cwd&quot;: &quot;$&#123;workspaceRoot&#125;&quot;,
            &quot;env&quot;: &#123;&#125;,
            &quot;envFile&quot;: &quot;$&#123;workspaceRoot&#125;&#x2F;.env&quot;,
            &quot;redirectOutput&quot;: true,
       &#125;
   ]
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>tasks.json</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&#123;
    &quot;version&quot;: &quot;2.0.0&quot;,
    &quot;tasks&quot;: [
       &#123;
            &quot;label&quot;: &quot;python&quot;,
            &quot;type&quot;: &quot;shell&quot;,
            &quot;command&quot;: &quot;D:\\python\\python\\python.exe&quot;, &#x2F;&#x2F; 替换为自己的python.exe路径
            &quot;args&quot;: [
                &quot;$&#123;file&#125;&quot;
           ],
            &quot;group&quot;: &#123;
                &quot;kind&quot;: &quot;build&quot;,
                &quot;isDefault&quot;: true
           &#125;,
            &quot;problemMatcher&quot;: [
                &quot;$eslint-compact&quot;
           ]
       &#125;
   ]
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="修改python解释器"><a href="#修改python解释器" class="headerlink" title="修改python解释器"></a>修改python解释器</h6><p>vscode中Ctrl+shirt+p调出查询窗口，输入python:select选择python解释器</p>
<p><img src="/2023/012220963/32.PNG" alt="32"></p>
<h5 id="Debug-Start"><a href="#Debug-Start" class="headerlink" title="Debug Start"></a>Debug Start</h5><p>使用debug模式启动程序代码</p>
<p><img src="/2023/012220963/33.PNG" alt="33"></p>
<h6 id="1-下断点debug"><a href="#1-下断点debug" class="headerlink" title="1.下断点debug"></a>1.下断点debug</h6><p>在想要调试的代码处下断点，程序debug运行后会停在此行代码执行前，等待用户调试。</p>
<h6 id="2-调试选项"><a href="#2-调试选项" class="headerlink" title="2.调试选项"></a>2.调试选项</h6><p><strong>继续</strong>：继续执行程序，直到遇到下一个断点为止</p>
<p><strong>单步跳过</strong>：在普通代码行运行时，会逐行运行程序。若遇到调用自定义函数命令，且在该定义的函数里没有断点，则直接运行完该函数，不会进入该函数并逐行运行该函数内的代码</p>
<p><strong>单步调试</strong>：逐行顺序运行程序。若遇到自定义函数（def），则进入该函数，逐行运行该函数内的代码</p>
<p><strong>单步跳出</strong>：当前运行在自定义函数（def）里时，如果在该自定义函数里没有断点，则会直接运行完当前自定义函数，停在调用函数的那一行</p>
<p><strong>重启</strong>：重新启动debug程序</p>
<p><strong>停止</strong>：结束程序</p>
<h6 id="3-变量监视"><a href="#3-变量监视" class="headerlink" title="3.变量监视"></a>3.变量监视</h6><p>一般在不进行 debug 时会使用print打印某个变量的值，debug可以很轻松的监视每个变量的值。</p>
<p><img src="/2023/012220963/34.png" alt="34"></p>
<h3 id="前端加密爆破"><a href="#前端加密爆破" class="headerlink" title="前端加密爆破"></a>前端加密爆破</h3><p>在我们渗透过程在，经常会发现没有验证码，也没有登录次数限制，但是用户名密码都是加密的，如果只是md5加密或者hash，burp的Intruder模块自带加密爆破功能，但是如果是自定义的加密方式，或者多层md5此时就没法直接爆破了。这种情况都是前端调用 javascript代码对提交内容进行了加密，通过代码调试可以找到加密函数，使用与其相同的加密函数处理数据提交即可。</p>
<h4 id="常见前端加密"><a href="#常见前端加密" class="headerlink" title="常见前端加密"></a>常见前端加密</h4><h5 id="base64加密与解密"><a href="#base64加密与解密" class="headerlink" title="base64加密与解密"></a>base64加密与解密</h5><p>window.atob() 与window.btoa()可以实现对base64格式的数据进行解码和编码，其兼容性是主流浏览器，IE10及以上。</p>
<p>window.atob(encodedStr)只可以解码用btoa方法编码的字符串。</p>
<p>window.btoa()：将ascii字符串或二进制数据转换成一个base64编码过的字符串,但该方法不能直接作用于Unicode字符串。</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&lt;script&gt;
      var str &#x3D; &#39;RUNOOB&#39;
      var enc &#x3D; window.btoa(str) &#x2F;&#x2F;编码成base64的
      var dec &#x3D; window.atob(enc) &#x2F;&#x2F;把base64解码
      var res &#x3D; &#39;编码字符串为: &#39; + enc + &#39;&lt;br&gt;&#39; + &#39;解码后字符串为: &#39; + dec
      console.log(res)
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>当遇到中文时，需要先对中文转码否则会乱码。</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">var str &#x3D; btoa(encodeURIComponent(&quot;中文汉字&quot;));
&#x2F;&#x2F;还可以解码回来
decodeURIComponent(atob(enc)) &#x3D;&gt;  中文汉字<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h5 id="MD5加密"><a href="#MD5加密" class="headerlink" title="MD5加密"></a>MD5加密</h5><p>首先引入相关js,对要加密的内容直接加密</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;blueimp-md5&#x2F;2.10.0&#x2F;js&#x2F;md5.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;script&gt;
  var b &#x3D;$(&quot;#logPassword&quot;);
  $.md5(b.val())
&lt;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>MD5没有解密算法，或者说解密算法很复杂，所以可以在数据库中存放经过<strong>两次MD5</strong>加密的的内容，也可以再配合加‘盐’ salt</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">console.log(md5(md5(&quot;123456&quot;) + &quot;a&quot;));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h5 id="sha1加密"><a href="#sha1加密" class="headerlink" title="sha1加密"></a>sha1加密</h5><p>首先引入相关js,对要加密的内容直接加密</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&lt;script type&#x3D;&quot;text&#x2F;ecmascript&quot; src&#x3D;&quot;sha1.js&quot;&gt;&lt;&#x2F;script&gt;
var sha &#x3D; hex_sha1(&#39;mima123465&#39;);
console.log(sha);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h5 id="RSA用公钥私钥加密解密"><a href="#RSA用公钥私钥加密解密" class="headerlink" title="RSA用公钥私钥加密解密"></a>RSA用公钥私钥加密解密</h5><p>首先引入相关配置文件</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&lt;script src&#x3D;&quot;js&#x2F;jsencrypt.js&quot;&gt;&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>前端在向后台发起登录请求之前，先请求后台获取公钥的方法</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">var publicKey &#x3D; null;
$.ajax(&#123;
 			url: &quot;xxx&quot;,
 			type: &quot;post&quot;,
 			dataType: &quot;text&quot;,
 			success: function(data) &#123;
 				var encrypt &#x3D; new JSEncrypt();
 				if(data)&#123;
 					publicKey &#x3D; data;
 				&#125;;
 			&#125;
&#125;);
&#x2F;&#x2F; 通过公钥对用户名和密码加密
encrypt.setPublicKey(publicKey);
var username;
var password;
username &#x3D; encrypt.encrypt(vm.username.trim());
password &#x3D; encrypt.encrypt(vm.password.trim());
&#x2F;&#x2F; 接下来就是用加密后的用户名密码请求后台
$.ajax(&#123;
 	type: &quot;POST&quot;,
 	url: &quot;xxxxxx&quot;,
 	data: &#123;
   		&quot;username&quot;:username,
 		&quot;password&quot;:password,
 	&#125;,
 	  dataType: &quot;json&quot;,
 	  success: function (result) &#123;
 			if (result.code &#x3D;&#x3D; 0) &#123;&#x2F;&#x2F;登录成功
 			parent.location.href &#x3D; &#39;index.html&#39;;
 			&#125; else &#123;
 				vm.error &#x3D; true;
  	 			vm.errorMsg &#x3D; result.msg;
 				vm.refreshCode();
 			&#125;
 		&#125;
 &#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="练习靶场"><a href="#练习靶场" class="headerlink" title="练习靶场"></a>练习靶场</h4><p><strong>待补充</strong></p>
<h4 id="浏览器调试前端代码"><a href="#浏览器调试前端代码" class="headerlink" title="浏览器调试前端代码"></a>浏览器调试前端代码</h4><h5 id="找加密函数"><a href="#找加密函数" class="headerlink" title="找加密函数"></a>找加密函数</h5><p>通过查看源码，审查元素等方式找到加密数据的函数</p>
<p><strong>打开浏览器调试</strong></p>
<p><strong>找到加密函数</strong></p>
<h5 id="打断点debug"><a href="#打断点debug" class="headerlink" title="打断点debug"></a>打断点debug</h5><p>断点的位置很有考究，调试的代码越少越利于我们分析，根据经验尽量精准的选择代码</p>
<h5 id="触发加密函数"><a href="#触发加密函数" class="headerlink" title="触发加密函数"></a>触发加密函数</h5><p>一般来说，点击登陆即可触发加密函数，点击登陆后代码暂停在了断点处</p>
<h5 id="调试（继续、单步、步进、步出）"><a href="#调试（继续、单步、步进、步出）" class="headerlink" title="调试（继续、单步、步进、步出）"></a>调试（继续、单步、步进、步出）</h5><p>单步（Step into next function call）进入当前函数，一步步执行</p>
<p>步进（Step into next function call）如果在一个函数处步进，可以进入该函数</p>
<p>步出（Step out of current function）如果在一个调用函数中，从此函数退出，回到调用该函数的地方</p>
<p>跨越 (Step over next function call) 执行到下一步的函数调用（跳到下一行）</p>
<h5 id="监视表达式"><a href="#监视表达式" class="headerlink" title="监视表达式"></a>监视表达式</h5><h5 id="下载js加密文件"><a href="#下载js加密文件" class="headerlink" title="下载js加密文件"></a>下载js加密文件</h5><h5 id="还原JS加密文件"><a href="#还原JS加密文件" class="headerlink" title="还原JS加密文件"></a>还原JS加密文件</h5><h5 id="burp插件jsEncrypter"><a href="#burp插件jsEncrypter" class="headerlink" title="burp插件jsEncrypter"></a>burp插件jsEncrypter</h5><p>加密函数已经在本地实现了，先在讲加密函数和burp联动起来</p>
<h6 id="1-安装phantomjs"><a href="#1-安装phantomjs" class="headerlink" title="1.安装phantomjs"></a>1.安装phantomjs</h6><p><strong>简介</strong>：PhantomJS是一个基于webkit的JavaScript API。它使用QtWebKit作为它核心浏览器的功能，使用webkit来编译解释执行JavaScript代码。任何你可以在基于webkit浏览器做的事情，它都能做到。它不仅是个隐形的浏览器，提供了诸如CSS选择器、支持Web标准、DOM操作、JSON、HTML5、</p>
<p>Canvas、SVG等，同时也提供了处理文件I/O的操作，从而使你可以向操作系</p>
<p>统读写文件等。PhantomJS的用处可谓非常广泛，诸如网络监测、网页截</p>
<p>屏、无需浏览器的 Web 测试、页面访问自动化等</p>
<p><strong>配置：</strong>下载 <a target="_blank" rel="noopener" href="https://phantomjs.org/download.html">phantomjs</a>将 bin 目录<strong>添加至环境变量</strong>即可</p>
<p><img src="/2023/012220963/36.PNG" alt="36"></p>
<h6 id="2-安装jsEncrypter"><a href="#2-安装jsEncrypter" class="headerlink" title="2.安装jsEncrypter"></a>2.安装jsEncrypter</h6><p> <a target="_blank" rel="noopener" href="https://github.com/c0ny1/jsEncrypter/releases">下载jsEncrypter</a></p>
<h6 id="3-burp导入插件jsEncrypter"><a href="#3-burp导入插件jsEncrypter" class="headerlink" title="3.burp导入插件jsEncrypter"></a>3.burp导入插件jsEncrypter</h6><p><img src="/2023/012220963/37.png" alt="37"></p>
<h6 id="4-安装靶场webapp"><a href="#4-安装靶场webapp" class="headerlink" title="4.安装靶场webapp"></a>4.安装靶场webapp</h6><p>将靶场文件放在 WWW 目录下即可</p>
<h5 id="burp调用js加密函数"><a href="#burp调用js加密函数" class="headerlink" title="burp调用js加密函数"></a>burp调用js加密函数</h5><p><strong>1.修改 phantomjs_server.js文件，导入js加密函数</strong></p>
<p><strong>2.加入自定义js函数改写后</strong></p>
<p><strong>3.启动phantomjs</strong></p>
<p>命令： phantomjs phantomjs_server.js</p>
<p><strong>4.burp</strong> <strong>插件连接</strong> <strong>phantomjs</strong></p>
<p>插件点击 connect 连接到 phantomjs ，并进行加密函数调用测试</p>
<p><strong>5.开始爆破</strong></p>
<h3 id="JS加密靶场练习"><a href="#JS加密靶场练习" class="headerlink" title="JS加密靶场练习"></a>JS加密靶场练习</h3><h4 id="哈希算法"><a href="#哈希算法" class="headerlink" title="哈希算法"></a>哈希算法</h4><p>哈希算法（Hash Algorithms）也称为散列算法、杂凑算法或数字指纹，是可以将任意长度的消息压缩为一个固定长度的消息的算法。</p>
<p>哈希算法是区块链技术体系的重要组成部分，也是现代密码学领域的重要分支，在身份认证、数字签名等诸多领域有着广泛的应用。</p>
<p>密码学哈希算法的主要特性就是<strong>单向性</strong>，即在算法上，<strong>只能从输入值计算得到输出值</strong>，而从输出值计算得到输入值是不可行的。</p>
<p>常用的哈希算法包括MD系列算法和SHA系列算法，其中MD系列算法有MD2、MD4、MD5、RIPEMD算法等，SHA系列算法有SHA0、SHA1、SHA2、SHA3算法等</p>
<h5 id="密码解密网站"><a href="#密码解密网站" class="headerlink" title="密码解密网站"></a>密码解密网站</h5><p><a target="_blank" rel="noopener" href="https://www.cmd5.com/">https://www.cmd5.com/</a> 、 <a target="_blank" rel="noopener" href="https://www.somd5.com/">https://www.somd5.com/</a> 、<a target="_blank" rel="noopener" href="https://pmd5.com/">https://pmd5.com/</a></p>
<h5 id="md5"><a href="#md5" class="headerlink" title="md5"></a>md5</h5><p>MD5信息摘要算法，一种被广泛使用的密码散列函数，可以产生出一个128位（16字节）的散列值（hash value），用于确保信息传输完整一致。通常为为 <strong>32</strong> <strong>位十六进制字符</strong>，16位MD5值是 32位MD5的前16位。</p>
<p><strong>test.html</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&lt;script src&#x3D;&quot;.&#x2F;md5.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;script&gt;
    var password &#x3D; String(&quot;123456&quot;); &#x2F;&#x2F; 注意，这里是字符串
    var en_password &#x3D; hex_md5(password);
    console.log(en_password);
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>phantomjs_server.js</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&#x2F;&#x2F; 加载实现加密算法的js脚本
var wasSuccessful &#x3D; phantom.injectJs(&#39;md5.js&#39;); &#x2F;*引入实现加密的js文件*&#x2F;
&#x2F;&#x2F; 处理函数
function js_encrypt(payload) &#123;
    var newpayload;
    &#x2F;**********在这里编写调用加密函数进行加密的代码************&#x2F;
    var password &#x3D; String(payload);
    var en_password &#x3D; hex_md5(password);
    newpayload &#x3D; en_password
        &#x2F;**********************************************************&#x2F;
    return newpayload;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="SHA家族名称"><a href="#SHA家族名称" class="headerlink" title="SHA家族名称"></a>SHA家族名称</h5><p>计算机名词发音网站：<a target="_blank" rel="noopener" href="http://www.howtopronounce.cc/sha1">http://www.howtopronounce.cc/sha1</a></p>
<p><img src="/2023/012220963/35.png" alt="35"></p>
<h5 id="SHA1"><a href="#SHA1" class="headerlink" title="SHA1"></a>SHA1</h5><p>SHA-1 是最广泛使用和设置的加密哈希函数之一，SSL 证书颁发机构经常使用它来签署证书。SHA-1 是一个 160 位散列，它接受一个输入并生成一个 160 位（20 字节）的散列值，称为消息摘要。它通常由一个 <strong>40</strong> <strong>位长的十六进制字符</strong>串描述。</p>
<h5 id="SHA256"><a href="#SHA256" class="headerlink" title="SHA256"></a>SHA256</h5><p>SHA256算法使用的哈希值长度是256位。这是一个抽象类，此类的唯一实现是<em>SHA256</em>Managed。对于任意长度的消息，SHA256都会产生一个256bit长度的散列值，称为消息摘要，可以用一个<strong>长度为64</strong>的十六进制字符串**表示</p>
<h5 id="SHA384"><a href="#SHA384" class="headerlink" title="SHA384"></a>SHA384</h5><p>SHA384是其中比较常见的一种摘要算法，可以用一个<strong>长度为<strong><strong>96</strong></strong>的十六进制</strong>字符串表示</p>
<h5 id="SHA512"><a href="#SHA512" class="headerlink" title="SHA512"></a>SHA512</h5><p>SHA384是其中比较常见的一种摘要算法，可以用一个<strong>长度为<strong><strong>128</strong></strong>的十六进制</strong>字符串表示</p>
<h4 id="密码加盐（Salt）"><a href="#密码加盐（Salt）" class="headerlink" title="密码加盐（Salt）"></a>密码加盐（Salt）</h4><p>原始密码加密后的哈希值存储在数据库中依然是不够安全的，那么有什么好的办法来解决这个问题呢？答案是加盐。盐（Salt）是什么？就是一个随机生成的字符串。我们将盐与原始密码连接（concat）在一起（放在前面或后面都可以），然后将concat后的字符串加密。采用这种方式加密密码，查表法就不灵了（因为盐是随机生成的）。</p>
<h5 id="加盐练习"><a href="#加盐练习" class="headerlink" title="加盐练习"></a>加盐练习</h5><pre class="line-numbers language-python" data-language="python"><code class="language-python">from hashlib import md5
str &#x3D; &quot;123456&quot;    # --post传入的参数
salt &#x3D; &quot;salt123&quot;
def q():
    m &#x3D; md5()
    m.update(str.encode(&#39;utf8&#39;))
    pass1 &#x3D; m.hexdigest()
    return pass1
def w():
    m &#x3D; md5()
    m.update((q() + salt).encode(&#39;utf8&#39;)) # 盐可以加在任何位置
    pass2 &#x3D; m.hexdigest()
    return pass2
print(w())<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="RSA"><a href="#RSA" class="headerlink" title="RSA"></a>RSA</h4><p><strong>RSA****是一种非对称加密算法</strong>，加密算法分为对称加密算法和非对称加密算法,其中非对称加密算法作为计算机通信安全的基石,在保证数据安全方面起着重要的作用。</p>
<p><strong>非对称加密</strong>(公钥加密)：指加密和解密使用不同密钥的加密算法，也称为<strong>公私钥加密</strong>。假设两个用户要加密交换数据，双方交换公钥，使用时一方用对方的<strong>公钥加密</strong>，另一方即可用自己的<strong>私钥解密</strong>。</p>
<h5 id="找公钥"><a href="#找公钥" class="headerlink" title="找公钥"></a>找公钥</h5><p>公钥是公开的，因为公钥只能用来加密，不能用来解密，所以公钥在网站的前端代码里能够找到</p>
<h5 id="编写加密函数"><a href="#编写加密函数" class="headerlink" title="编写加密函数"></a>编写加密函数</h5><p><strong>rsa.html</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&lt;script src&#x3D;&quot;.&#x2F;jsencrypt.js&quot;&gt;&lt;&#x2F;script&gt;
&lt;script&gt;
    var public_key &#x3D;
&quot;MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC0Llg1bVZhnyslfezwfeOkvnXWq59bDtmQyHvxkP&#x2F;
38Fw8QQXBfROCgzGc+Te6pOPl6Ye+vQ1rAnisBaP3rMk40i3OpallzVkuwRKydek3V9ufPpZEEH4eBgI
nMSDiMsggTWxcI&#x2F;Lvag6eHjkSc67RTrj96oxj0ipVRqjxW4X6HQIDAQAB&quot;;
    var password &#x3D; &quot;123456&quot;;
    var encrypt &#x3D; new JSEncrypt();
    encrypt.setPublicKey(public_key);
    en_password &#x3D; encrypt.encrypt(password);
    console.log(en_password)
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>phantomjs_server.js</strong></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">&#x2F;&#x2F; 加载实现加密算法的js脚本
var wasSuccessful &#x3D; phantom.injectJs(&#39;jsencrypt.js&#39;); &#x2F;*引入实现加密的js文件*&#x2F;
&#x2F;&#x2F; 处理函数
function js_encrypt(payload) &#123;
    var newpayload;
    &#x2F;**********在这里编写调用加密函数进行加密的代码************&#x2F;
    var public_key &#x3D;
&quot;MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC0Llg1bVZhnyslfezwfeOkvnXWq59bDtmQyHvxkP&#x2F;
38Fw8QQXBfROCgzGc+Te6pOPl6Ye+vQ1rAnisBaP3rMk40i3OpallzVkuwRKydek3V9ufPpZEEH4eBgI
nMSDiMsggTWxcI&#x2F;Lvag6eHjkSc67RTrj96oxj0ipVRqjxW4X6HQIDAQAB&quot;;
    var password &#x3D; String(payload);
    var encrypt &#x3D; new JSEncrypt();
    encrypt.setPublicKey(public_key);
    en_password &#x3D; encrypt.encrypt(password);
    newpayload &#x3D; en_password
        &#x2F;**********************************************************&#x2F;
    return newpayload;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">wwq</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://wwqstudy.github.io/2023/012220963.html">http://wwqstudy.github.io/2023/012220963.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">wwq</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="far fa-dot-circle"></i>&nbsp;本篇
            </div>
            <div class="card">
                <a href="/2023/012220963.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/23.jpg" class="responsive-img" alt="Web安全基础">
                        
                        <span class="card-title">Web安全基础</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-01-22
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            wwq
                            
                        </span>
                    </div>
                </div>

                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/10208472.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/1.jpg" class="responsive-img" alt="云原生网路全景安全数据采集与智能分析">
                        
                        <span class="card-title">云原生网路全景安全数据采集与智能分析</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-10-20
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            wwq
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2023</span>
            
            <a href="/about" target="_blank">wwq</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/wwqstudy" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1457060849@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1457060849" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1457060849" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":170,"height":340},"mobile":{"show":true},"log":false});</script></body>

</html>
